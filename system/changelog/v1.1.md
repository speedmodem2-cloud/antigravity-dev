# AG 개발환경 v1.1 — Portfolio1 교훈 반영

> 날짜: 2026-02-17

## 배경

Portfolio1(Alex Kira) 프로젝트 완료 후 발견된 문제점들을 개발환경 전체에 반영.

### 발견된 문제점

1. Phase 2(이미지 생성) 사용자 확인 없이 건너뜀
2. 초기 디자인이 CSS-only 최소 구현 → "AI가 대충 만든 느낌"
3. 나노바나나 이미지 미사용 → 수동으로 적용 필요했음
4. 이미지 미최적화 (PNG 원본 16MB 그대로 사용, dist/ 17MB)
5. 에셋 복사 태스크 누락 (shared → project 복사 단계 없음)
6. 리뷰 체크리스트에 접근성/이미지 항목 없음
7. 파이프라인이 실제 AG 워크플로와 불일치

---

## 변경 내역

### 템플릿 (3개 파일)

**system/instructions/templates/web-project.md**

- Phase 전환 규칙 섹션 추가
  - Phase 건너뛰기 금지 (사용자 확인 필수)
  - Phase 전환 시 명시적 보고
- 에셋 관리 섹션 추가
  - 이미지 원본: shared/assets/ → 프로젝트: src/assets/images/
  - WebP 형식, 500KB 이하 필수
  - CSS 그라디언트 fallback 명시
- 디자인 품질 기준 추가
  - 시각적 레이어 2개 이상
  - 호버 이펙트, 애니메이션 포함
  - 단색/단순 그라디언트 배경 금지
- 나노바나나 이미지 가이드 섹션 추가
- 에이전트 태스크 목록 템플릿 추가

**shared/snippets/vite-config-template.ts**

- CSS Modules 설정 추가 (camelCaseOnly)
- Vitest 테스트 설정 블록 추가 (jsdom, non-scoped CSS)
- esbuild 대화형 프롬프트 방지 가이드 (주석)

**shared/snippets/deploy.sh**

- 이미지 크기 검증 단계 추가 (500KB 초과 시 경고)
- dist/ 전체 크기 검증 추가 (5MB 초과 시 경고)

---

### 에이전트 정의 (5개 파일)

**system/agents/definitions/architect.md**

- 워크플로 추가 (Phase 0~7 전체 흐름)
- Phase 전환 규칙 명시
  - "진행" = 현재 Phase 완료 후 다음
  - 명시적 "Phase N 스킵" 없이 건너뛰기 금지
- 에셋 계획 섹션 (이미지 목록/프롬프트, 저장 위치, 최적화 기준)

**system/agents/definitions/developer.md**

- 에셋 처리 규칙 추가
  - Phase 3 첫 태스크로 에셋 복사
  - WebP 최적화 의무
  - CSS fallback + 사용자 알림
- 디자인 품질 기준 추가
  - CSS-only 최소 구현 금지
  - 배경 레이어, 호버 이펙트, 애니메이션 필수

**system/agents/definitions/reviewer.md**

- 접근성(a11y) 체크리스트 추가
  - 시맨틱 HTML, ARIA, 키보드, 색상 대비, alt 텍스트
- 에셋 검증 항목 추가
  - 이미지 500KB, WebP, dist/ 5MB

**system/agents/definitions/tester.md**

- 빌드 검증 섹션 추가
  - dist/ 전체 5MB 이하
  - 개별 이미지 500KB 이하

**system/agents/definitions/documenter.md**

- 교훈(Lessons Learned) 섹션 필수화
- 필수 산출물 목록 명시 (README + 교훈 기록)

---

### 매뉴얼 (3개 파일)

**system/manuals/review-checklist.md**

- 접근성 섹션 추가 (7개 항목)
  - 시맨틱 HTML, 스킵 네비게이션, focus-visible
  - ARIA, alt 텍스트, 색상 대비, 키보드 탐색
- 에셋 최적화 섹션 추가 (4개 항목)
  - WebP, 500KB, dist/ 5MB, 미사용 에셋

**system/manuals/quality-gates.md**

- Gate 5 추가: 에셋 품질
  - WebP 변환, 500KB 제한, dist/ 5MB 제한
- Gate 6 추가: 접근성
  - 시맨틱 HTML, 키보드, ARIA, 색상 대비, 스킵 네비게이션

**system/manuals/coding-rules.md**

- 이미지 처리 규칙 섹션 추가
  - WebP 우선, 500KB 제한
  - object-fit: cover + 오버레이
  - Vite 정적 에셋 활용
  - 원본 shared/assets/, 프로젝트용 src/assets/images/

---

### 파이프라인 (1개 파일)

**system/pipeline/stage-transitions.md**

- 전면 재작성: 기존 6단계 → Phase 0~7
  - Phase 0: 사전 점검 (환경변수, MCP, 디렉토리)
  - Phase 1: 설계 (INSTRUCTIONS.md, 이미지 프롬프트)
  - Phase 2: 에셋 준비 (이미지 생성/동기화/최적화)
  - Phase 3: 구현 (에셋 복사 + 개발 태스크)
  - Phase 4: 리뷰 (접근성 + 에셋 검증 포함)
  - Phase 5: 테스트 (빌드 크기 검증 포함)
  - Phase 6: 문서화 (교훈 기록 필수)
  - Phase 7: 배포 (이미지 크기 경고 포함)
- 필수 규칙 명시: Phase 스킵 시 사용자 확인

---

### 정리 작업

- workspace/portfolio1/ 중복 폴더 삭제 완료
- MEMORY.md에 Portfolio1 교훈 기록 추가

---

## 영향 범위

- 수정 파일: 12개
- 신규 파일: 0개 (기존 파일 개선만)
- 프로젝트 코드 변경: 없음 (글로벌 지침만 수정)

## 다음 단계

- Portfolio2 프로젝트에서 개선된 지침 적용 및 검증
